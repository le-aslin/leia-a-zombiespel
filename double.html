<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="./style.css">

    </head>
<body>
    <div class="health-bar">
        <div class="health">
        </div>
      </div> 
      <div id="game-over" class="hidden">
        <h1>Game Over!</h1>
       <div id="restart-button" class="hidden"> 
        <h2>Game by pressing spacebar</h2>
    </div>
    <script src="http://koda.nu/simple.js">
      
        var zombies = [];
 
        var i = 0;
 
        while (i<1)
        {
            zombies.push({x:random(totalWidth), y:random(totalHeight), speed: random(1,4)});
 
            i += 1;
        }
        
    var player = {
        x:100, y:100
    }

    let beat = new Audio('sound/backgroundaudio.mp3');
    let sound = new Audio('sound/ballonpop.mp3');
    let audio = new Audio('sound/lose.mp3');

    function update() {
    clearScreen();
    beat.play();

    picture(player.x, player.y, "img/ballongspel1_30.png");

    if (keyboard.d)
        player.x += 10;
    if (keyboard.a)
        player.x -= 10;
    if (keyboard.w)
        player.y -= 10;
    if (keyboard.s)
        player.y += 10;

    for (var i = 0; i < zombies.length; i++) {
        var zombie = zombies[i];

        picture(zombie.x, zombie.y, "img/cactus.png");

        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowUp') {
                zombie.y -= 0.1;
            } else if (event.key === 'ArrowDown') {
                zombie.y += 0.1;
            } else if (event.key === 'ArrowLeft') {
                zombie.x -= 0.1;
            } else if (event.key === 'ArrowRight') {
                zombie.x += 0.1;
            }
        });

        var d = distance(player, zombie);

        if (d < 10) {
            zombies.splice(0, zombies.length);
            i = zombies.length;
            clearScreen();
            text(30, 500, 200, "GAME OVER!", "red");
            stopUpdate();
            beat.pause();
            sound.loop = false;
            sound.play();
            audio.loop = false;
            audio.play();
            document.querySelector('.health-bar').classList.add('game-over');
            document.getElementById('restart-button').addEventListener('click', function() {
                location.reload();
            });

        }
    }
}
 </script>
</body>
</html>